import{_ as n,W as s,X as a,a1 as t}from"./framework-b2028a60.js";const p={},e=t(`<h1 id="windowsmanager单例" tabindex="-1"><a class="header-anchor" href="#windowsmanager单例" aria-hidden="true">#</a> WindowsManager单例</h1><div class="hint-container tip"><p class="hint-container-title">简单介绍</p><ul><li>该类是全局的窗体管理类</li><li>对于窗体的启用和关闭都可以通过该类来进行操作</li></ul></div><h2 id="针对windows" tabindex="-1"><a class="header-anchor" href="#针对windows" aria-hidden="true">#</a> 针对Windows</h2><h3 id="_1、获取主窗体" tabindex="-1"><a class="header-anchor" href="#_1、获取主窗体" aria-hidden="true">#</a> 1、获取主窗体</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// 主窗体(方便弹窗使用)</span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token keyword">public</span> <span class="token return-type class-name">IWindows</span> MainWindow <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>


Dialog<span class="token punctuation">.</span><span class="token function">ShowPopupWindow</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vampirewal<span class="token punctuation">.</span>Core<span class="token punctuation">.</span>WindoSetting<span class="token punctuation">.</span>PopupWindowSetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Message <span class="token operator">=</span> <span class="token string">&quot;测试弹窗&quot;</span><span class="token punctuation">,</span>
    OwnerWindow <span class="token operator">=</span> WindowsManager<span class="token punctuation">.</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>MainWindow<span class="token punctuation">,</span>
    Type <span class="token operator">=</span> Vampirewal<span class="token punctuation">.</span>Core<span class="token punctuation">.</span>WindoSetting<span class="token punctuation">.</span>MessageType<span class="token punctuation">.</span>Successful
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、获取正常窗体" tabindex="-1"><a class="header-anchor" href="#_2、获取正常窗体" aria-hidden="true">#</a> 2、获取正常窗体</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// 获取Window窗体</span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ViewId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returns</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returns</span><span class="token punctuation">&gt;</span></span></span>
<span class="token keyword">public</span> <span class="token return-type class-name">IWindows</span> <span class="token function">GetWindow</span><span class="token punctuation">(</span><span class="token class-name">Guid</span> ViewId<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> windows<span class="token punctuation">.</span><span class="token function">FirstOrDefault</span><span class="token punctuation">(</span>f <span class="token operator">=&gt;</span> f<span class="token punctuation">.</span>ViewId <span class="token operator">==</span> ViewId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

Dialog<span class="token punctuation">.</span><span class="token function">ShowPopupWindow</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">PopupWindowSetting</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Message <span class="token operator">=</span> <span class="token string">&quot;haha&quot;</span><span class="token punctuation">,</span>
    IsKeepOpen <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    OwnerWindow <span class="token operator">=</span> WindowsManager<span class="token punctuation">.</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">GetWindow</span><span class="token punctuation">(</span>ViewId<span class="token punctuation">)</span><span class="token punctuation">,</span>
    Type <span class="token operator">=</span> MessageType<span class="token punctuation">.</span>Successful
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、获取dialog窗体" tabindex="-1"><a class="header-anchor" href="#_3、获取dialog窗体" aria-hidden="true">#</a> 3、获取Dialog窗体</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// 获取DialogWindow窗体</span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ViewId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>returns</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>returns</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exception</span> <span class="token attr-name">cref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Exception<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exception</span><span class="token punctuation">&gt;</span></span></span>
<span class="token keyword">public</span> <span class="token return-type class-name">IWindows</span> <span class="token function">GetDialogWindow</span><span class="token punctuation">(</span><span class="token class-name">Guid</span> ViewId<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>DialogWindowDic<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>ViewId<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">IWindows</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> window<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">else</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WindowsManagerException</span><span class="token punctuation">(</span><span class="token string">&quot;未找到对应DialogWindow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、关闭弹窗" tabindex="-1"><a class="header-anchor" href="#_4、关闭弹窗" aria-hidden="true">#</a> 4、关闭弹窗</h3><div class="language-csharp line-numbers-mode" data-ext="cs"><pre class="language-csharp"><code><span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// 关闭DialogWindow窗体</span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>summary</span><span class="token punctuation">&gt;</span></span></span>
<span class="token doc-comment comment">/// <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>param</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ViewId<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>param</span><span class="token punctuation">&gt;</span></span></span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">CloseDialogWindow</span><span class="token punctuation">(</span><span class="token class-name">Guid</span> ViewId<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>DialogWindowDic<span class="token punctuation">.</span><span class="token function">TryGetValue</span><span class="token punctuation">(</span>ViewId<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name">IWindows</span> window<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> DialogWindow <span class="token operator">=</span> window <span class="token keyword">as</span> <span class="token class-name">IDialogWindow</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">var</span></span> vm <span class="token operator">=</span> DialogWindow<span class="token punctuation">.</span>DataContext <span class="token keyword">as</span> <span class="token class-name">ViewModelBase</span><span class="token punctuation">;</span>
            DialogWindow<span class="token punctuation">.</span>CloseDialogWindowCallBackCommand<span class="token punctuation">?.</span><span class="token function">Execute</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span><span class="token function">GetResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> ex<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">finally</span>
        <span class="token punctuation">{</span>
            window<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            DialogWindowDic<span class="token punctuation">.</span><span class="token function">Remove</span><span class="token punctuation">(</span>ViewId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

WindowsManager<span class="token punctuation">.</span><span class="token function">GetInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">CloseDialogWindow</span><span class="token punctuation">(</span>ViewId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),o=[e];function c(i,l){return s(),a("div",null,o)}const d=n(p,[["render",c],["__file","WindowsManager.html.vue"]]);export{d as default};
